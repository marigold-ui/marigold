import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import { Dialog, useDialogButtonProps } from './Dialog';
import { Button } from '../Button';
import { Text } from '../Text';

<Meta
  title="Components/Dialog"
  parameters={{
    actions: {
      handles: ['click'],
    },
  }}
  argTypes={{
    isOpen: {
      control: {
        type: 'boolean',
      },
      description: 'handled by state from useDialogButtonProps',
      options: [true, false],
      table: {
        defaultValue: {
          summary: false,
        },
      },
    },
    title: {
      control: {
        type: 'text',
      },
      description: 'set dialog title',
    },
    close: {
      control: {
        type: 'text',
      },
      description: 'handled by state from useDialogButtonProps',
    },
  }}
/>

# Dialog

export const Template = ({ ...args }) => {
  const { state, openButtonProps, openButtonRef } = useDialogButtonProps();
  return (
    <>
      <Button
        variant="secondary"
        size="small"
        {...openButtonProps}
        ref={openButtonRef}
      >
        Open Dialog
      </Button>
      {state.isOpen && (
        <Dialog
          title="Dialog Title"
          isOpen={state.isOpen}
          close={state.close}
          {...args}
        >
          <Text>Dialog content</Text>
        </Dialog>
      )}
    </>
  );
};

<Canvas>
  <Story name="Default">{Template.bind({})}</Story>
</Canvas>

<ArgsTable story="Default" />
