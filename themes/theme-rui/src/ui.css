/*
 * UI Component Utilities
 *
 * This file contains utilities to style UI components consistently,
 * including input and surface styling, state variations, and elevation levels.
 */

/* ========================= */
/*           Input           */
/* ========================= */

/*
 * Provides spacing and text styling for input elements.
 * Visual affordances (borders, backgrounds, shadows) are handled by "ui-surface".
 * Combine both utilities for complete input styling.
 */
@utility ui-input {
  @apply h-button w-full min-w-0;
  @apply px-3 py-2;
  @apply text-foreground placeholder:text-placeholder text-sm;
}

/* ========================= */
/*          Surface          */
/* ========================= */

/*
 * The "ui-surface" utility defines visual surfaces with distinct background colors.
 * Apply elevation levels to them when needed (uses raised as default).
 * 
 * This utility uses background-clip and background-origin with gradient borders.
 * The gradient border transitions from top (lighter) to bottom (darker).
 */
@utility ui-surface {
  @apply rounded-surface relative transition-[background,border,box-shadow];

  /* prettier-ignore */
  background:
      linear-gradient(
        to bottom,
        var(--ui-background-color, #fff),
        var(--ui-background-color, #fff)
      ),
      linear-gradient(
        to bottom,
        var(--ui-border-color, var(--color-surface-border)),
        oklch(from var(--ui-border-color, var(--color-surface-border)) calc(l - 0.1) c h)
      );

  background-clip: padding-box, border-box;
  background-origin: padding-box, border-box;
  border: 1px solid transparent;
}

/*
 * The "ui-surface-contrast" utility defines a visually contrasting surface
 * (e.g. ActionBar, toolbars) that stands out against the page background.
 * It uses the brand color as the background with brand-foreground text.
 * Combine with elevation utilities as needed.
 *
 * Unlike ui-surface (solid white body), this utility renders a subtle top-to-bottom
 * gradient on the body for depth, and a diagonal rim-light border that mimics
 * light catching the upper edge of a raised dark surface.
 *
 * Supports the same --ui-background-color and --ui-border-color custom props
 * as ui-surface for state overrides.
 */
@utility ui-surface-contrast {
  @apply rounded-surface relative transition-[background,border,box-shadow];
  @apply text-brand-foreground;

  @apply inset-shadow-[0_1px_0_0_rgb(255_255_255/0.2),0_25px_30px_-15px_rgb(255_255_255/0.2)];

  /* prettier-ignore */
  background:
      linear-gradient(
        to bottom,
        /* oklch(from var(--ui-background-color, var(--color-brand)) calc(l + 0.13) c h), */
        var(--ui-background-color, var(--color-brand)),
        var(--ui-background-color, var(--color-brand))
      ),
      linear-gradient(
        to bottom,
        oklch(from var(--ui-border-color, var(--color-brand)) calc(l + 0.38) c h),
        oklch(from var(--ui-border-color, var(--color-brand)) calc(l + 0.12) c h)
      );

  background-clip: padding-box, border-box;
  background-origin: padding-box, border-box;
  border: 1px solid transparent;
}

/*
 * The "ui-surface-dark" utility defines a dark glass-like surface
 * (e.g. dark cards, panels, elevated dark containers).
 * It uses stone-950 as background with a subtle inner rim-light shadow.
 *
 * Supports the same --ui-background-color and --ui-border-color custom props
 * as ui-surface for state overrides.
 */
@utility ui-surface-dark {
  @apply rounded-surface relative transition-[background,border,box-shadow];
  @apply text-brand-foreground;
  @apply inset-shadow-[0_1px_0_0_rgb(255_255_255/0.2),0_25px_30px_-15px_rgb(255_255_255/0.2)];

  /* prettier-ignore */
  background:
      linear-gradient(
        to bottom,
        var(--ui-background-color, var(--color-brand)),
        var(--ui-background-color, var(--color-brand))
      ),
      linear-gradient(
        to bottom,
        oklch(from var(--ui-border-color, var(--color-brand)) calc(l + 0.35) c h),
        oklch(from var(--ui-border-color, var(--color-brand)) calc(l + 0.15) c h)
      );
  background-clip: padding-box, border-box;
  background-origin: padding-box, border-box;
  border: 1px solid transparent;
}

/* ========================= */
/*           State           */
/* ========================= */

/*
 * Applies a consistent visual style used for keyboard focus states across components.
 * Used this when the border of the component can be changed.
 */
@utility ui-state-focus {
  @apply ring-ring/50 ring-[3px] outline-none;
  --ui-border-color: var(--color-ring);
}

/*
* Applies a consistent visual style for invalid elements.
*/
@utility ui-state-error {
  /* Overrides the transparent border. Gradient would get too dark. */
  @apply border-destructive shadow-destructive/20;
  @apply focus:border-destructive focus:ring-destructive/20;
}

/*
 * Applies a consistent visual style for disabled elements.
 */
@utility ui-state-disabled {
  @apply text-disabled-foreground bg-disabled cursor-not-allowed;
}

/*
 * Applies a consistent visual style for readonly elements.
 */
@utility ui-state-readonly {
  --ui-background-color: var(--color-muted);
}
