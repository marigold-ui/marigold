/* --- Base Surface Styles --- */
.surface {
  /* relative inline-flex w-full */
  position: relative;
  display: inline-flex;
  width: 100%;

  /* rounded-lg border border-input */
  border-radius: var(--radius-surface);
  border: 1px solid var(--color-input);

  /* bg-background bg-clip-padding */
  background-color: var(--color-surface);
  background-clip: padding-box;

  /* text-base/5 */
  font-size: var(--font-size-base);
  line-height: var(--line-height-5);

  /* shadow-xs */
  box-shadow: var(--shadow-xs);

  /* transition-shadow */
  transition-property: box-shadow;
  transition-timing-function: var(--ease-in-expo);
  transition-duration: 150ms;

  /* ring-ring/25 (Sets the default variable for the ring) */
  --tw-ring-color: oklch(var(--color-ring) / 0.25);

  /* Base ::before Pseudo-element */
  &::before {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 0;
    border-radius: calc(var(--radius-lg) - 1px);
  }

  /* Default State ::before Shadow */
  &:not(:has(:disabled)):not(:has(:focus-visible)):not(
      :has([aria-invalid='true'])
    )::before {
    box-shadow: 0 1px oklch(var(--color-black-raw) / 0.04);
  }

  /* Shadow Reset for Interactive States */
  &:has(:focus-visible),
  &:has(:disabled),
  &:has([aria-invalid='true']) {
    box-shadow: none;
  }
}

/* --- Focus State --- */
.surface-focus {
  /* has-focus-visible:border-ring has-focus-visible:ring-[3px] */
  &:has(:focus-visible) {
    border-color: var(--color-ring);
    box-shadow: 0 0 0 3px var(--tw-ring-color);
  }
}

/* --- Error/Invalid State --- */
.surface-error {
  /* has-aria-invalid:border-destructive/36 */
  &:has([aria-invalid='true']) {
    border-color: oklch(var(--color-destructive-raw) / 0.36);
  }

  /* Focus + Invalid combined state */
  &:has(:focus-visible):has([aria-invalid='true']) {
    border-color: oklch(var(--color-destructive-raw) / 0.64);
    --tw-ring-color: oklch(var(--color-destructive-raw) / 0.16);
  }
}

/* --- Disabled State --- */
.surface-disabled {
  /* has-disabled:opacity-64 */
  &:has(:disabled) {
    opacity: 0.64;
  }
}

/* --- Combined Reusable Class --- */
.my-reusable-part {
  @apply surface-base surface-focus surface-error surface-disabled;
}
